<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>STL Model Viewer</title>
    <!-- This the OPT logo code.  -->
    <header id='header'
        class='all_colors header_color dark_bg_color  av_header_top av_logo_left av_main_nav_header av_menu_right av_custom av_header_sticky av_header_shrinking_disabled av_header_stretch_disabled av_mobile_menu_tablet av_header_searchicon_disabled av_header_unstick_top av_minimal_header av_bottom_nav_disabled  av_alternate_logo_active av_header_border_disabled'
        role="banner" itemscope="itemscope" itemtype="https://schema.org/WPHeader">
        <div id='header_main' class='container_wrap container_wrap_logo'>
            <div class='container av-logo-container'>
                <div class='inner-container'><span class='logo'><a href='http://optindustries.com/'><img height='100'
                                width='300' src='http://optindustries.com/wp-content/uploads/2019/09/LOGO_W-300x226.png(3 kB)
    http://optindustries.com/wp-content/uploads/2019/09/LOGO_W-300x226.png
' alt='OPT Industries Inc.' /></a>
                        <!-- This is the end of the OPT logo code. -->
                        <!-- This is the style sheet that links the CSS to the HTML. -->
                        <link rel="stylesheet" type="text/css" href="client/css/styles.css" />
                        <script>
                            function generateSTL() {
                                let nBytes = 0,
                                    oFiles = document.getElementById("uploadInput").files,
                                    nFiles = oFiles.length;
                                for (let nFileId = 0; nFileId < nFiles; nFileId++) {
                                    var file = oFiles[nFileId];
                                    // set your file encoding
                                    var encoding = 'ISO-8859-1';
                                    // create a file reader
                                    var reader = new FileReader();
                                    // set on load handler for reader
                                    reader.onload = function (e) {
                                        var result = reader.result;
                                        // parse using your corresponding loader
                                        let loader = new THREE.STLLoader();
                                        let geometry = loader.parse(result);
                                        STLViewerHTML5(geometry, "model")
                                    }
                                    // read the file as text using the reader
                                    reader.readAsText(file, encoding);
                                }
                            }
                        </script>
</head>

<body onload="generateSTL();">
    <form name="uploadForm">
        <p><input id="uploadInput" type="file" name="myFiles" onchange="generateSTL();" multiple> selected files: <span
                id="fileNum">0</span>; total size: <span id="fileSize">0</span></p>
        <p><input type="submit" value="Send File"></p>
    </form>
    <div id="model" style="width: 500px; height: 500px"> </div>
    <script src="/client/scripts/three.min.js"></script>
    <script src="/client/scripts/STLLoader.js"></script>
    <script src="/client/scripts/OrbitControls.js"></script>
    <script src="/client/scripts/STLViewerHTML5.js"></script>
    <!--Footer-->
    </div>
    <div>
        <footer>
            <p> @ OPT Industries. All rights reserved.</p>
        </footer>
    </div>
</body>
<!--End of footer-->
</body>

</html>